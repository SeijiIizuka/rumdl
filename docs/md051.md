# MD051 - Link Fragments Should Exist

## Description

This rule is triggered when a link fragment (the part after the `#` symbol in a link URL) doesn't correspond to any heading in the document. Link fragments are used to create anchor links to specific sections of a document, and when they don't exist, the links are broken.

For example, in the link `[Go to Introduction](#introduction)`, the fragment `introduction` should match a heading in the document. The rule checks if the fragment corresponds to a valid heading ID.

Heading IDs in Markdown are typically generated by:
1. Converting the heading text to lowercase
2. Replacing spaces with hyphens
3. Removing non-alphanumeric characters or replacing them with hyphens

## Configuration

This rule has no configurable options.

## Examples

### Valid

```markdown
# Introduction

[Go to Introduction](#introduction)

## Details Section

[Learn more details](#details-section)

# Complex Heading: With Special Characters!

[See the complex section](#complex-heading-with-special-characters)
```

### Invalid

```markdown
# Introduction

[Go to Summary](#summary)

## Details Section

[See the missing section](#missing-section)
```

Warnings:
- Line 3: Link fragment 'summary' does not exist
- Line 7: Link fragment 'missing-section' does not exist

### Fixed

```markdown
# Introduction

[Go to Summary](file.md)

## Details Section

[See the missing section](file.md)
```

Note: The automatic fix removes the fragment from the link URL but keeps the link to the base URL. You may need to manually correct these links to point to valid locations.

## Special Cases

- The rule only checks internal fragments in the same document.
- External links with fragments (like `https://example.com/page#section`) are not validated.
- The rule converts headings to fragments using standard rules (lowercase, spaces to hyphens, etc.).
- Fragments that refer to elements with explicit IDs (like in HTML) are not validated.
- Fragment matching is case-sensitive.
- The rule only considers ATX headings (`# Heading`) and setext headings (`Heading\n===`).

## Related Rules

- MD042 (No Empty Links) - For checking empty links
- MD034 (No Bare URLs) - For proper link formatting
- MD039 (No Space in Links) - For ensuring proper link syntax
- MD053 (Link Image Reference Definitions) - For checking reference-style links 